
```scala
package ohnosequences.statika.aws

import ohnosequences.statika._

trait AnyAWSDistribution extends AnyDistribution {
```

### AMI dependency

We have a generic `AbstractAMI` type and every AWS distribution contains an 
instance of it as all the members/bundles of the distribution are supposed 
to be installed in the same environment.

```scala
  // type AMI <: AbstractAMI[MD] // {type MetaD = MD }
  val ami: AbstractAMI[MD]

  // def userScript_[
  //     // D >: this.type <: ami.DistBound,
  //     B <: AnyBundle : this.isMember : this.isInstallable]
  //   (b: B
  //   // , credentials: AWSCredentials = RoleCredentials
  //   ): String =
  //     ami.userScript[this.type, B](this, b) //, credentials)

  // def us[B <: AnyBundle : this.isMember : this.isInstallable](b: B)
  def us(name: String) = ami.userScript(name)
```

### Resources management

We will use a _resources_ bucket at S3, and all conf related with this will be also part of
the distribution type. Meanwhile this is a dumb interface.

See also [ohnosequences/statika#35](https://github.com/ohnosequences/statika/issues/35).

```scala
  // type Path = String
  // def getResourcePath[B <: AnyBundle](bundle: B, relativePath: Path): Path = ""
  // val resourceBucket: Path = ""
```

Initial check, that we are running on the right AMI

```scala
  def setContext: InstallResults = ami.checkID
```

Metadata of the distribution contains it's name and some sbt-specific information. it is
automatically generated by `sbt-statika` plugin and therefore needs to be dependent on the
type of a particular bundle (to be not mixed with other generated metadata).

See [Metadata source](Metadata.md) for more information.

```scala
  type MD <: Metadata
  val metadata: MD
}
```

Just a constructor with AMI and sets of members/deps as type-parameters

```scala
abstract class AWSDistribution[
    Md <: Metadata
  // , A <: AbstractAMI[Md] // { type MetaD = Md }
    // A <: AbstractAMI
  , M <: TypeSet : ofBundles
  , D <: TypeSet : ofBundles
  , T <: HList   : towerFor[D]#is
  ](val metadata: Md
  , val ami: AbstractAMI[Md]
  , val members: M
  , deps: D = âˆ…
  ) extends Bundle[D, T](deps) with AnyAWSDistribution {

  // type AMI = A
  type Members = M 
  type MD = Md

}

```
